# Plex variant - copy this to vpn-services.yml if using docker-compose.plex-arr-stack.yml
# Changes from Jellyfin version: jellyfin→plex (port 32400), jellyseerr→overseerr
#
# REMOTE ACCESS (via Cloudflare Tunnel):
# - Plex, Overseerr, WireGuard - user-facing services
#
# LOCAL-ONLY (access via NAS_IP:PORT or WireGuard VPN):
# - Sonarr, Radarr, Prowlarr, qBittorrent, Bazarr, Pi-hole
# - These have weak default auth ("Disabled for Local" / "Bypass localhost")
# - Use Overseerr for remote media requests instead

http:
  routers:
    plex:
      rule: "Host(`plex.yourdomain.com`)"
      entryPoints:
        - web
      service: plex

    overseerr:
      rule: "Host(`overseerr.yourdomain.com`)"
      entryPoints:
        - web
      service: overseerr

    wg:
      rule: "Host(`wg.yourdomain.com`)"
      entryPoints:
        - web
      service: wg

  services:
    plex:
      loadBalancer:
        servers:
          - url: "http://192.168.100.4:32400"

    overseerr:
      loadBalancer:
        servers:
          - url: "http://192.168.100.8:5055"

    wg:
      loadBalancer:
        servers:
          - url: "http://192.168.100.6:51821"
